import{a as qe,b as Ae,c as Re,d as je,e as Ne,f as Ve,g as He,h as ze,i as Ge,j as We,k as Ke,l as pe,m as Ye,n as de,o as ce,p as tt,q as it}from"./chunk-5DJVS5IU.js";import{D as ke,E as we,F as Oe,G as Te,J as Fe,K as Ue,M as Be}from"./chunk-B7XVRIX7.js";import{C as se,D as Qe,K as Ze,d as Je,e as Xe,g as d,u as Y,w as E}from"./chunk-BRTOJXHP.js";import{E as De,F as Le,G as $e,I as et,e as X,i as Q,o as Se,y as Ee,z as Pe}from"./chunk-3WS4G3GU.js";import{a as Me,e as Ie}from"./chunk-E22MF4XY.js";import{$ as i,Aa as v,Ba as me,C as K,Da as L,Ea as ve,Eb as re,F as P,G as J,Ga as j,K as O,L as T,P as x,Pa as Ce,Qa as ye,aa as A,c as le,da as u,fa as p,g as ae,ga as t,gb as k,h as _e,ha as a,hb as $,ia as _,l as ge,ma as R,oa as M,ob as xe,pa as c,q as W,qb as be,r as he,sa as oe,ta as b,w,wa as fe,y as D,ya as r,za as h}from"./chunk-DKSOLQS5.js";import{a as G,b as ne}from"./chunk-JCVLWF7J.js";function pt(l,s){if(l&1&&_(0,"img",15),l&2){let e=c().$implicit,m=c();b("src","assets/demo/images/items/",m.model[e[0]],".png",x)}}function dt(l,s){if(l&1&&(t(0,"span",16),r(1),a()),l&2){let e=c().$implicit,m=c();i(1),v("+",m.model[e[0]+"Refine"],"")}}function ct(l,s){if(l&1&&(t(0,"div",19),_(1,"img",15),t(2,"div",10),r(3),a()()),l&2){let e=c(3);i(1),b("src","assets/demo/images/items/",e.model.ammo,".png",x),i(2),v(" ",(e.itemMap[e.model.ammo]==null?null:e.itemMap[e.model.ammo].name)||""," ")}}function ut(l,s){if(l&1&&(t(0,"td",17),u(1,ct,4,2,"div",18),a()),l&2){let e=c(2);i(1),p("ngIf",e.model.ammo)}}function _t(l,s){if(l&1&&_(0,"img",15),l&2){let e=c().$implicit,m=c();b("src","assets/demo/images/items/",m.model[e[1]]||m.model[e[2]],".png",x)}}function gt(l,s){if(l&1&&(t(0,"span",16),r(1),a()),l&2){let e=c().$implicit,m=c();i(1),v("+",m.model[e[1]+"Refine"]||m.model[e[2]+"Refine"],"")}}function ht(l,s){if(l&1&&(t(0,"tr")(1,"td",7)(2,"div",8),u(3,pt,1,1,"img",9),t(4,"div",10),u(5,dt,2,1,"span",11),r(6),a()()(),u(7,ut,2,1,"td",12),t(8,"td",13)(9,"div",14),u(10,_t,1,1,"img",9),t(11,"div",10),u(12,gt,2,1,"span",11),r(13),a()()()()),l&2){let e=s.$implicit,m=s.index,o=c();i(3),p("ngIf",o.model[e[0]]),i(2),p("ngIf",o.model[e[0]+"Refine"]>0),i(1),v(" ",(o.itemMap[o.model[e[0]]]==null?null:o.itemMap[o.model[e[0]]].name)||""," "),i(1),p("ngIf",m===0),i(3),p("ngIf",!!o.model[e[1]]||!!o.model[e[2]]),i(2),p("ngIf",o.model[e[1]+"Refine"]>0||o.model[e[2]+"Refine"]>0),i(1),v(" ",(o.itemMap[o.model[e[1]]||o.model[e[2]]]==null?null:o.itemMap[o.model[e[1]]||o.model[e[2]]].name)||""," ")}}function ft(l,s){if(l&1&&_(0,"img",15),l&2){let e=c().$implicit,m=c();b("src","assets/demo/images/items/",m.model[e[0]],".png",x)}}function vt(l,s){if(l&1&&(t(0,"span",16),r(1),a()),l&2){let e=c().$implicit,m=c();i(1),v("+",m.model[e[0]+"Refine"],"")}}function Ct(l,s){if(l&1&&(t(0,"div",19),_(1,"img",15),t(2,"div",10),r(3),a()()),l&2){let e=c(3);i(1),b("src","assets/demo/images/items/",e.model.costumeEnchantGarment4,".png",x),i(2),v(" ",(e.itemMap[e.model.costumeEnchantGarment4]==null?null:e.itemMap[e.model.costumeEnchantGarment4].name)||""," ")}}function yt(l,s){if(l&1&&(t(0,"td",17),u(1,Ct,4,2,"div",18),a()),l&2){let e=c(2);i(1),p("ngIf",e.model.costumeEnchantGarment4)}}function xt(l,s){if(l&1&&_(0,"img",15),l&2){let e=c().$implicit,m=c();b("src","assets/demo/images/items/",m.model[e[1]],".png",x)}}function bt(l,s){if(l&1&&(t(0,"span",16),r(1),a()),l&2){let e=c().$implicit,m=c();i(1),v("+",m.model[e[1]+"Refine"],"")}}function St(l,s){if(l&1&&(t(0,"tr")(1,"td",20)(2,"div",8),u(3,ft,1,1,"img",9),t(4,"div",10),u(5,vt,2,1,"span",11),r(6),a()()(),u(7,yt,2,1,"td",12),t(8,"td",21)(9,"div",14),u(10,xt,1,1,"img",9),t(11,"div",10),u(12,bt,2,1,"span",11),r(13),a()()()()),l&2){let e=s.$implicit,m=s.index,o=c();i(3),p("ngIf",o.model[e[0]]),i(2),p("ngIf",o.model[e[0]+"Refine"]>0),i(1),v(" ",(o.itemMap[o.model[e[0]]]==null?null:o.itemMap[o.model[e[0]]].name)||""," "),i(1),p("ngIf",m===0),i(3),p("ngIf",o.model[e[1]]),i(2),p("ngIf",o.model[e[1]+"Refine"]>0),i(1),v(" ",(o.itemMap[o.model[e[1]]]==null?null:o.itemMap[o.model[e[1]]].name)||""," ")}}var nt=(()=>{let s=class s{constructor(){this.itemMap={},this.model={},this.mainItemNames=[[d.headUpper,d.headMiddle],[d.headLower,d.armor],[d.weapon,d.shield,d.leftWeapon],[d.garment,d.boot],[d.accRight,d.accLeft]],this.shadowItemNames=[[d.costumeEnchantUpper,d.costumeEnchantMiddle],[d.costumeEnchantLower,d.shadowArmor],[d.shadowWeapon,d.shadowShield],[d.costumeEnchantGarment,d.shadowBoot],[d.shadowEarring,d.shadowPendant]]}};s.\u0275fac=function(o){return new(o||s)},s.\u0275cmp=P({type:s,selectors:[["app-equipment-ui"]],inputs:{itemMap:"itemMap",model:"model"},decls:13,vars:2,consts:[[1,"grid","grid-nogutter"],[1,"col-fixed","mb-2"],[1,"equipmentPreview",2,"width","450px"],[1,"panel"],[1,"equipmentTable","text-blue-500"],[4,"ngFor","ngForOf"],[1,"col-fixed"],[1,"main_left_item"],[1,"flex","gap-1"],["alt","","class","item_img",3,"src",4,"ngIf"],[1,"text_ellips","font-medium"],["class","font-bold",4,"ngIf"],["rowspan","6",4,"ngIf"],[1,"main_right_item"],[1,"flex","flex-row-reverse","gap-1"],["alt","",1,"item_img",3,"src"],[1,"font-bold"],["rowspan","6"],["class","ammo_container",4,"ngIf"],[1,"ammo_container"],[1,"shadow_left_item"],[1,"shadow_right_item"]],template:function(o,n){o&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"table",4)(5,"tbody"),u(6,ht,14,7,"tr",5),a()()()()(),t(7,"div",6)(8,"div",2)(9,"div",3)(10,"table",4)(11,"tbody"),u(12,St,14,7,"tr",5),a()()()()()()),o&2&&(i(6),p("ngForOf",n.mainItemNames),i(6),p("ngForOf",n.shadowItemNames))},dependencies:[k,$],styles:[".main_left_item[_ngcontent-%COMP%]   .item_img[_ngcontent-%COMP%]{margin-left:7px}.main_left_item[_ngcontent-%COMP%]   .text_ellips[_ngcontent-%COMP%]{width:10rem;height:37px;overflow:hidden;text-align:left}.main_right_item[_ngcontent-%COMP%]   .item_img[_ngcontent-%COMP%]{margin-right:5px}.main_right_item[_ngcontent-%COMP%]   .text_ellips[_ngcontent-%COMP%]{width:9rem;height:37px;overflow:hidden;text-align:left}.shadow_left_item[_ngcontent-%COMP%]   .item_img[_ngcontent-%COMP%]{margin-left:7px}.shadow_left_item[_ngcontent-%COMP%]   .text_ellips[_ngcontent-%COMP%]{width:10rem;height:37px;overflow:hidden;text-align:left}.shadow_right_item[_ngcontent-%COMP%]   .item_img[_ngcontent-%COMP%]{margin-right:5px}.shadow_right_item[_ngcontent-%COMP%]   .text_ellips[_ngcontent-%COMP%]{width:9rem;height:37px;overflow:hidden;text-align:left}.item_img[_ngcontent-%COMP%]{height:fit-content;width:37px}.equipmentTable[_ngcontent-%COMP%]{width:450px;height:209px;background-image:url(https://www.divine-pride.net/Content/basic_interface/equipwin_bg.png);background-repeat:no-repeat;background-size:contain}"]});let l=s;return l})();function It(l,s){if(l&1&&(t(0,"div",7),_(1,"img",8),a()),l&2){let e=c().$implicit;i(1),b("src","assets/demo/images/items/",e.mainId,".png",x)}}function Et(l,s){if(l&1&&_(0,"img",8),l&2){let e=c().$implicit;b("src","assets/demo/images/items/",e,".png",x)}}function Pt(l,s){l&1&&_(0,"img",17)}function kt(l,s){if(l&1&&(t(0,"div",12)(1,"div",13),u(2,Et,1,1,"img",14),u(3,Pt,1,0,"img",15),t(4,"div",16),r(5),a()()()),l&2){let e=s.$implicit,m=c(2).$implicit,o=c();i(2),p("ngIf",m.isHead),i(1),p("ngIf",!m.isHead),i(2),v(" ",o.getItemLabel(e)," ")}}function wt(l,s){if(l&1&&(t(0,"div",12)(1,"div",13),_(2,"img",8),t(3,"div",16),r(4),a()()()),l&2){let e=s.$implicit,m=c(3);i(2),b("src","assets/demo/images/items/",e,".png",x),i(2),v(" ",m.getItemLabel(e)," ")}}function Ot(l,s){if(l&1&&(t(0,"div")(1,"div",18),r(2),a()()),l&2){let e=s.$implicit;i(2),h(e)}}function Tt(l,s){if(l&1&&(t(0,"div",9),u(1,kt,6,3,"div",10),u(2,wt,5,2,"div",10),t(3,"div",4),u(4,Ot,3,1,"div",11),a()()),l&2){let e=c().$implicit;i(1),p("ngForOf",e.cardIds),i(1),p("ngForOf",e.enchantIds),i(2),p("ngForOf",e.optionTxts)}}function Dt(l,s){if(l&1&&(t(0,"div")(1,"div",4),u(2,It,2,1,"div",5),u(3,Tt,5,3,"div",6),a()()),l&2){let e=s.$implicit;L("grid grid-nogutter item_label_",e.itemType,""),i(2),p("ngIf",e.mainId),i(1),p("ngIf",e.mainId)}}function Lt(l,s){if(l&1&&(t(0,"div",7),_(1,"img",8),a()),l&2){let e=c().$implicit;i(1),b("src","assets/demo/images/items/",e.mainId,".png",x)}}function $t(l,s){if(l&1&&(t(0,"div")(1,"div",18),r(2),a()()),l&2){let e=s.$implicit;i(2),h(e)}}function Ft(l,s){l&1&&(t(0,"div")(1,"div",18),r(2,"no option"),a()())}function Ut(l,s){if(l&1&&(t(0,"div",20),u(1,$t,3,1,"div",11),u(2,Ft,3,0,"div",21),a()),l&2){let e=c().$implicit;i(1),p("ngForOf",e.optionTxts),i(1),p("ngIf",!(e.optionTxts!=null&&e.optionTxts.length))}}function Bt(l,s){if(l&1&&(t(0,"div"),u(1,Lt,2,1,"div",5),u(2,Ut,3,2,"div",19),a()),l&2){let e=s.$implicit;L("flex gap-2 item_label_",e.itemType,""),i(1),p("ngIf",e.mainId),i(1),p("ngIf",e.mainId)}}var qt=[d.headUpper,d.headMiddle,d.headLower,d.armor,d.weapon,d.leftWeapon,d.shield,d.garment,d.boot,d.accRight,d.accLeft],At={[d.leftWeapon]:!0,[d.shield]:!0},Rt=[d.shadowWeapon,d.shadowArmor,d.shadowShield,d.shadowBoot,d.shadowEarring,d.shadowPendant],lt=(()=>{let s=class s{constructor(){this.itemMap={},this.model={},this.displayMainItems=[],this.displayShadowItems=[]}ngOnInit(){let m=[...this.model.rawOptionTxts??[]];this.displayMainItems=qt.map(o=>{let n=this.model[o];if(!n)return{itemType:o,cardIds:[],enchantIds:[],optionTxts:[],isHidden:At[o]||!1};let g=this.model[`${o}Refine`],f=o===d.weapon?[this.model[d.weaponCard1],this.model[d.weaponCard2],this.model[d.weaponCard3],this.model[d.weaponCard4]]:o===d.leftWeapon?[this.model[d.leftWeaponCard1],this.model[d.leftWeaponCard2],this.model[d.leftWeaponCard3],this.model[d.leftWeaponCard4]]:[this.model[`${o}Card`]],C=[this.model[`${o}Enchant1`],this.model[`${o}Enchant2`],this.model[`${o}Enchant3`]],y=(se.get(o)||[]).map(I=>ce.get(m[I]));return{itemType:o,mainId:n,isHead:o===d.headUpper||o===d.headMiddle,refineTxt:g>0?`+${g}`:"",cardIds:f.filter(Boolean),enchantIds:C.filter(Boolean),optionTxts:y.filter(Boolean)}}).filter(o=>!o.isHidden),this.displayShadowItems=Rt.map(o=>{let n=this.model[o];if(!n)return{itemType:o};let g=this.model[`${o}Refine`],f=(se.get(o)||[]).map(C=>ce.get(m[C]));return{itemType:o,mainId:n,refineTxt:g>0?`+${g}`:"",optionTxts:f.filter(Boolean)}})}getItemLabel(m){return this.itemMap[m]?.name||"empty"}};s.\u0275fac=function(o){return new(o||s)},s.\u0275cmp=P({type:s,selectors:[["app-equipment-in-detail"]],inputs:{itemMap:"itemMap",model:"model"},decls:5,vars:2,consts:[[1,"grid","grid-nogutter"],[1,"col-8"],[3,"class",4,"ngFor","ngForOf"],[1,"col-4"],[1,"col-12","flex","gap-2"],["class","item_template mt-1",4,"ngIf"],["class","grid grid-nogutter mt-1",4,"ngIf"],[1,"item_template","mt-1"],["alt","",1,"item_img",3,"src"],[1,"grid","grid-nogutter","mt-1"],["class","col-12",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"col-12"],[1,"item_template","flex","gap-1"],["alt","","class","item_img",3,"src",4,"ngIf"],["src","assets/demo/images/items/card.png","alt","","class","item_img",4,"ngIf"],[1,"text_ellips","pr-2",2,"text-overflow","ellipsis"],["src","assets/demo/images/items/card.png","alt","",1,"item_img"],[1,"option-txt-label"],["class","flex gap-2 mt-1",4,"ngIf"],[1,"flex","gap-2","mt-1"],[4,"ngIf"]],template:function(o,n){o&1&&(t(0,"div",0)(1,"div",1),u(2,Dt,4,5,"div",2),a(),t(3,"div",3),u(4,Bt,3,5,"div",2),a()()),o&2&&(i(2),p("ngForOf",n.displayMainItems),i(2),p("ngForOf",n.displayShadowItems))},dependencies:[k,$],styles:[".item_template[_ngcontent-%COMP%]{position:relative}.item_img[_ngcontent-%COMP%]{height:27px;background-image:url(./media/item_bg.UKIETPF2.PNG);background-repeat:no-repeat;background-size:cover}.text_ellips[_ngcontent-%COMP%]{height:19px;overflow:hidden;white-space:nowrap}.text_ellips_no_height[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap}.text_group_ellips[_ngcontent-%COMP%]{width:60%;overflow:hidden;white-space:nowrap}[_nghost-%COMP%]     .item_label_weapon, [_nghost-%COMP%]     .item_label_weaponCard1, [_nghost-%COMP%]     .item_label_weaponCard2, [_nghost-%COMP%]     .item_label_weaponCard3, [_nghost-%COMP%]     .item_label_weaponCard4, [_nghost-%COMP%]     .item_label_ammo, [_nghost-%COMP%]     .item_label_weaponEnchant1, [_nghost-%COMP%]     .item_label_weaponEnchant2, [_nghost-%COMP%]     .item_label_weaponEnchant3{color:var(--pink-200)}[_nghost-%COMP%]     .item_label_weapon_main .item_label_element_converter .p-inputtext{color:var(--yellow-300)}[_nghost-%COMP%]     .item_label_leftWeapon_main .p-dropdown-label, [_nghost-%COMP%]     .item_label_leftWeapon_main .p-cascadeselect-label, [_nghost-%COMP%]     .item_label_leftWeapon, [_nghost-%COMP%]     .item_label_leftWeaponCard1, [_nghost-%COMP%]     .item_label_leftWeaponCard2, [_nghost-%COMP%]     .item_label_leftWeaponCard3, [_nghost-%COMP%]     .item_label_leftWeaponCard4, [_nghost-%COMP%]     .item_label_leftWeaponEnchant1, [_nghost-%COMP%]     .item_label_leftWeaponEnchant2, [_nghost-%COMP%]     .item_label_leftWeaponEnchant3{color:var(--pink-200)}[_nghost-%COMP%]     .item_label_shield_main .p-dropdown-label, [_nghost-%COMP%]     .item_label_shield_main .p-cascadeselect-label, [_nghost-%COMP%]     .item_label_shield, [_nghost-%COMP%]     .item_label_shieldCard, [_nghost-%COMP%]     .item_label_shieldEnchant1, [_nghost-%COMP%]     .item_label_shieldEnchant2, [_nghost-%COMP%]     .item_label_shieldEnchant3{color:var(--pink-200)}[_nghost-%COMP%]     .item_label_head .p-dropdown-label, [_nghost-%COMP%]     .item_label_head .p-cascadeselect-label, [_nghost-%COMP%]     .item_label_headUpper, [_nghost-%COMP%]     .item_label_headUpperCard, [_nghost-%COMP%]     .item_label_headUpperEnchant1, [_nghost-%COMP%]     .item_label_headUpperEnchant2, [_nghost-%COMP%]     .item_label_headUpperEnchant3, [_nghost-%COMP%]     .item_label_headMiddle, [_nghost-%COMP%]     .item_label_headMiddleCard, [_nghost-%COMP%]     .item_label_headMiddleEnchant1, [_nghost-%COMP%]     .item_label_headMiddleEnchant2, [_nghost-%COMP%]     .item_label_headMiddleEnchant3, [_nghost-%COMP%]     .item_label_headLower, [_nghost-%COMP%]     .item_label_headLowerEnchant1, [_nghost-%COMP%]     .item_label_headLowerEnchant2, [_nghost-%COMP%]     .item_label_headLowerEnchant3{color:var(--blue-200)}[_nghost-%COMP%]     .item_label_def .p-dropdown-label, [_nghost-%COMP%]     .item_label_def .p-cascadeselect-label, [_nghost-%COMP%]     .item_label_armor, [_nghost-%COMP%]     .item_label_armorCard, [_nghost-%COMP%]     .item_label_armorEnchant1, [_nghost-%COMP%]     .item_label_armorEnchant2, [_nghost-%COMP%]     .item_label_armorEnchant3, [_nghost-%COMP%]     .item_label_garment, [_nghost-%COMP%]     .item_label_garmentCard, [_nghost-%COMP%]     .item_label_garmentEnchant1, [_nghost-%COMP%]     .item_label_garmentEnchant2, [_nghost-%COMP%]     .item_label_garmentEnchant3, [_nghost-%COMP%]     .item_label_boot, [_nghost-%COMP%]     .item_label_bootCard, [_nghost-%COMP%]     .item_label_bootEnchant1, [_nghost-%COMP%]     .item_label_bootEnchant2, [_nghost-%COMP%]     .item_label_bootEnchant3{color:var(--red-200)}[_nghost-%COMP%]     .item_label_acc .p-dropdown-label, [_nghost-%COMP%]     .item_label_acc .p-cascadeselect-label, .item_float_label[_ngcontent-%COMP%], [_nghost-%COMP%]     .item_label_accLeft, [_nghost-%COMP%]     .item_label_accLeftCard, [_nghost-%COMP%]     .item_label_accLeftEnchant1, [_nghost-%COMP%]     .item_label_accLeftEnchant2, [_nghost-%COMP%]     .item_label_accLeftEnchant3, [_nghost-%COMP%]     .item_label_accRight, [_nghost-%COMP%]     .item_label_accRightCard, [_nghost-%COMP%]     .item_label_accRightEnchant1, [_nghost-%COMP%]     .item_label_accRightEnchant2, [_nghost-%COMP%]     .item_label_accRightEnchant3{color:var(--purple-200)}[_nghost-%COMP%]     .item_label_pet .p-dropdown-label, [_nghost-%COMP%]     .item_label_pet .p-cascadeselect-label{color:var(--orange-200)}[_nghost-%COMP%]     .item_label_costume .p-dropdown-label, [_nghost-%COMP%]     .item_label_costume .p-cascadeselect-label, [_nghost-%COMP%]     .item_label_costumeUpper, [_nghost-%COMP%]     .item_label_costumeEnchantUpper, [_nghost-%COMP%]     .item_label_costumeEnchantMiddle, [_nghost-%COMP%]     .item_label_costumeEnchantLower, [_nghost-%COMP%]     .item_label_costumeEnchantGarment, [_nghost-%COMP%]     .item_label_costumeEnchantGarment4{color:var(--yellow-400)}[_nghost-%COMP%]     .item_label_shadow .p-dropdown-label, [_nghost-%COMP%]     .item_label_shadow .p-cascadeselect-label, [_nghost-%COMP%]     .item_label_shadowWeapon, [_nghost-%COMP%]     .item_label_shadowArmor, [_nghost-%COMP%]     .item_label_shadowShield, [_nghost-%COMP%]     .item_label_shadowBoot, [_nghost-%COMP%]     .item_label_shadowEarring, [_nghost-%COMP%]     .item_label_shadowPendant{color:var(--green-200)}[_nghost-%COMP%]     .item_label_compare .p-dropdown-label, [_nghost-%COMP%]     .item_label_compare .p-cascadeselect-label, [_nghost-%COMP%]     .item_label_compare .p-multiselect-label, [_nghost-%COMP%]     .item_label_compare .p-listbox-item{background-color:#2a2a2a;color:var(--yellow-300)}.option-txt-label[_ngcontent-%COMP%]{background-color:var(--surface-section)}"]});let l=s;return l})();function Nt(l,s){if(l&1&&(t(0,"div",5)(1,"div",6),_(2,"img",7),t(3,"div",8),r(4),a()()()),l&2){let e=s.$implicit;i(2),b("src","assets/demo/images/items/",e.value,".png",x),i(2),h(e.label)}}function Vt(l,s){if(l&1&&(t(0,"div",5)(1,"span"),r(2),a(),r(3,":"),t(4,"span",9),r(5),a()()),l&2){let e=s.$implicit;i(2),h(e.label),i(3),h(e.value)}}function Ht(l,s){if(l&1&&(t(0,"div",5)(1,"span"),r(2),a(),r(3,":"),t(4,"span",9),r(5),a()()),l&2){let e=s.$implicit;i(2),h(e.label),i(3),h(e.value)}}function zt(l,s){if(l&1&&(t(0,"div",5)(1,"span"),r(2),a(),r(3,":"),t(4,"span",9),r(5),a()()),l&2){let e=s.$implicit;i(2),h(e.label),i(3),h(e.value)}}var at=(()=>{let s=class s{constructor(){this.itemMap={},this.model={},this.consumables=[],this.buffSkills=[],this.learnedSkills=[],this.activeSkills=[]}ngOnInit(){this.formatSKillToDisplay()}formatSKillToDisplay(){if(!this.job||!this.model)return;let m=[...this.model.consumables||[],...this.model.consumables2||[],...this.model.aspdPotions||[],this.model.aspdPotion].filter(Boolean),o=[];for(let n of m){let g=this.itemMap[n];g&&o.push({label:g.name,value:n})}this.consumables=o,this.buffSkills=this.toStrArray(this.model.skillBuffMap,Y),this.learnedSkills=this.toStrArray(this.model.passiveSkillMap,this.job.passiveSkills),this.activeSkills=this.toStrArray(this.model.activeSkillMap,this.job.activeSkills)}toStrArray(m,o){let n=m||{},g=[];for(let f of o||[]){let C=n[f.name];if(!C||C===0)continue;let y=f.dropdown.find(I=>I.value===C);y&&g.push({value:y.label,label:f.label})}return g}};s.\u0275fac=function(o){return new(o||s)},s.\u0275cmp=P({type:s,selectors:[["app-skill-detail"]],inputs:{itemMap:"itemMap",model:"model",job:"job"},decls:17,vars:4,consts:[[1,"grid","grid-nogutter","p-fluid"],[1,"col-3"],[1,"text-xl","font-semibold"],["class","pt-1",4,"ngFor","ngForOf"],[1,"text-xl","font-semibold","white-space-nowrap"],[1,"pt-1"],[1,"flex","gap-1"],["alt","",1,"consumable-icon",3,"src"],[1,"text_ellips"],[1,"buff-value-hilight","ml-1","font-semibold"]],template:function(o,n){o&1&&(t(0,"div",0)(1,"div",1)(2,"div",2),r(3,"Consumables"),a(),u(4,Nt,5,2,"div",3),a(),t(5,"div",1)(6,"div",2),r(7,"Buffs"),a(),u(8,Vt,6,2,"div",3),a(),t(9,"div",1)(10,"div",2),r(11,"Learned skills"),a(),u(12,Ht,6,2,"div",3),a(),t(13,"div",1)(14,"div",4),r(15,"Activating Skills/Effects"),a(),u(16,zt,6,2,"div",3),a()()),o&2&&(i(4),p("ngForOf",n.consumables),i(4),p("ngForOf",n.buffSkills),i(4),p("ngForOf",n.learnedSkills),i(4),p("ngForOf",n.activeSkills))},dependencies:[k],styles:[".consumable-icon[_ngcontent-%COMP%]{width:21px;height:fit-content}.buff-value-hilight[_ngcontent-%COMP%]{color:var(--primary-color)}"]});let l=s;return l})();function Wt(l,s){if(l&1&&(t(0,"div",39),_(1,"img",40),t(2,"div",41),r(3),a()()),l&2){let e=s.$implicit;i(1),b("src","assets/demo/images/jobs/icon_jobs_",e.icon,".png",x),i(2),h(e.label)}}function Kt(l,s){if(l&1){let e=R();t(0,"button",68),M("click",function(){O(e);let o=c().$implicit,n=c();return T(n.likePreset(o.tagId,!o.liked))}),a()}}function Jt(l,s){if(l&1){let e=R();t(0,"button",69),M("click",function(){O(e);let o=c().$implicit,n=c();return T(n.likePreset(o.tagId,!o.liked))}),a()}}function Xt(l,s){if(l&1&&(t(0,"div",14)(1,"div",15)(2,"div",70),_(3,"app-equipment-in-detail",56),a(),t(4,"div",71),_(5,"app-skill-detail",72),a()()()),l&2){let e=c().$implicit,m=c();i(3),p("itemMap",m.itemMap)("model",e.model),i(2),p("itemMap",m.itemMap)("model",e.model)("job",m.selectedCharacter)}}function Qt(l,s){if(l&1){let e=R();t(0,"tr")(1,"td")(2,"div",15)(3,"div",42)(4,"div",43)(5,"div",44),u(6,Kt,1,0,"button",45),u(7,Jt,1,0,"button",46),t(8,"span",47),r(9),a()(),t(10,"div")(11,"div",48),r(12),a(),t(13,"div",49),r(14),a()(),t(15,"div")(16,"button",50),M("click",function(){let n=O(e).$implicit,g=c();return T(g.copyPreset(n))}),a()()(),t(17,"div",43)(18,"div",51)(19,"p-inputSwitch",52),M("ngModelChange",function(o){let g=O(e).$implicit,f=c();return T(f.viewDetail[g.tagId]=o)}),a(),t(20,"label",53),r(21,"View detail"),a()(),t(22,"div")(23,"button",54),M("click",function(){let n=O(e).$implicit,g=c();return T(g.addToCalc(n))}),a()()()(),t(24,"div",55),_(25,"app-equipment-ui",56),a(),t(26,"div",57)(27,"div",15)(28,"div",24),r(29," Level: "),t(30,"span",58),r(31),a()(),t(32,"div",24),r(33," Job: "),t(34,"span",58),r(35),a()(),t(36,"div",24),r(37," Str: "),t(38,"span",59),r(39),a(),r(40,"+ "),t(41,"span"),r(42),a()(),t(43,"div",24),r(44," Int: "),t(45,"span",60),r(46),a(),r(47,"+ "),t(48,"span"),r(49),a()(),t(50,"div",24),r(51," Dex: "),t(52,"span",61),r(53),a(),r(54,"+ "),t(55,"span"),r(56),a()(),t(57,"div",24),r(58," Agi: "),t(59,"span",62),r(60),a(),r(61,"+ "),t(62,"span"),r(63),a()(),t(64,"div",24),r(65," Vit: "),t(66,"span",62),r(67),a(),r(68,"+ "),t(69,"span"),r(70),a()(),t(71,"div",24),r(72," Luk: "),t(73,"span",62),r(74),a(),r(75,"+ "),t(76,"span"),r(77),a()()(),t(78,"div",63)(79,"div",24),r(80," Melee: "),t(81,"span",64),r(82),a()(),t(83,"div",24),r(84," Range: "),t(85,"span",64),r(86),a()(),t(87,"div",14),r(88," ASPD: "),t(89,"span",64),r(90),a(),t(91,"span",65),r(92),a()(),t(93,"div",14),r(94," Hit: "),t(95,"span",64),r(96),a(),r(97," Perfect: "),t(98,"span",64),r(99),a()(),t(100,"div",14),r(101," CriRate: "),t(102,"span",64),r(103),a(),r(104," Dmg: "),t(105,"span",64),r(106),a()(),t(107,"div",24),r(108," ACD: "),t(109,"span",66),r(110),a()(),t(111,"div",24),r(112," FCT: "),t(113,"span",66),r(114),a()(),t(115,"div",24),r(116," VCT: "),t(117,"span",66),r(118),a()()()(),u(119,Xt,6,5,"div",67),a()()()}if(l&2){let e=s.$implicit,m=c();i(6),p("ngIf",!e.liked),i(1),p("ngIf",e.liked),i(2),h((e.tags==null?null:e.tags.no_tag)||0),i(3),h(e.publishName),i(2),v("by. ",e.publisherName,""),i(5),oe("inputId",e.tagId),p("ngModel",m.viewDetail[e.tagId]),i(1),oe("for",e.tagId),i(3),p("disabled",m.isCalculating||m.isCalculated[e.tagId])("loading",m.isCalculating),i(2),p("itemMap",m.itemMap)("model",e.model),i(6),v(" ",e.model==null?null:e.model.level," "),i(4),v(" ",e.model==null?null:e.model.jobLevel," "),i(4),v(" ",e.model==null?null:e.model.str," "),i(3),h(e.str||0),i(4),v(" ",e.model==null?null:e.model.int," "),i(3),h(e.int||0),i(4),v(" ",e.model==null?null:e.model.dex," "),i(3),h(e.dex||0),i(4),v(" ",e.model==null?null:e.model.agi," "),i(3),h(e.agi||0),i(4),v(" ",e.model==null?null:e.model.vit," "),i(3),h(e.vit||0),i(4),v(" ",e.model==null?null:e.model.luk," "),i(3),h(e.luk||0),i(5),h((e.summary==null?null:e.summary.melee)||0),i(4),h((e.summary==null?null:e.summary.range)||0),i(4),h((e.summary==null||e.summary.calc==null?null:e.summary.calc.totalAspd)||0),i(2),v("( ",(e.summary==null||e.summary.calc==null?null:e.summary.calc.hitPerSecs)||0," Hits/s )"),i(4),h((e.summary==null||e.summary.calc==null?null:e.summary.calc.totalHit)||0),i(3),v("",(e.summary==null||e.summary.calc==null?null:e.summary.calc.totalPerfectHit)||0," %"),i(4),v("",(e.summary==null||e.summary.calc==null?null:e.summary.calc.totalCri)||0," %"),i(3),v("",(e.summary==null?null:e.summary.criDmg)||0," %"),i(4),h((e.summary==null?null:e.summary.acd)||0),i(4),h((e.summary==null?null:e.summary.fct)||0),i(4),h((e.summary==null?null:e.summary.vct)||0),i(1),p("ngIf",m.viewDetail[e.tagId])}}function Yt(l,s){l&1&&(t(0,"tr")(1,"td"),r(2,"Not found"),a()())}function Zt(l,s){if(l&1&&(t(0,"div",73)(1,"span"),r(2),a()()),l&2){let e=s.$implicit;i(2),h(e.label)}}function ei(l,s){l&1&&(t(0,"span",74),r(1,"MVP"),a())}function ti(l,s){l&1&&(t(0,"div",100),_(1,"i",101),a())}function ii(l,s){if(l&1){let e=R();t(0,"div")(1,"button",102),M("click",function(){O(e);let o=c().$implicit,n=c();return T(n.removeCalculated(o.id))}),_(2,"i",103),a()()}if(l&2){let e=c(2);i(1),p("disabled",e.isCalculating)}}function ni(l,s){if(l&1&&(t(0,"div",14),_(1,"app-calc-value",104),a()),l&2){let e=c().$implicit;i(1),p("enableCompare",!1)("label",e.summary==null||e.summary.dmg==null?null:e.summary.dmg.skillPart2Label)("totalHit",e.summary==null||e.summary.calcSkill==null?null:e.summary.calcSkill.totalHits)("min",e.summary==null||e.summary.dmg==null?null:e.summary.dmg.skillMinDamage2)("max",e.summary==null||e.summary.dmg==null?null:e.summary.dmg.skillMaxDamage2)}}function li(l,s){if(l&1&&(t(0,"div",75)(1,"div",34),u(2,ti,2,0,"div",76),t(3,"div",77)(4,"div",78),r(5),a(),u(6,ii,3,1,"div",79),a(),t(7,"div",24),r(8," Type "),t(9,"span",80),r(10),a()(),t(11,"div",24),r(12," Element: "),t(13,"span"),r(14),a(),t(15,"span",81),r(16),a()(),t(17,"div",24),_(18,"app-calc-value",82),a(),t(19,"div",24),_(20,"app-calc-value",83),a(),t(21,"div",24),_(22,"app-calc-value",84),a(),t(23,"div",24),_(24,"app-calc-value",85),a(),t(25,"div",24),_(26,"app-calc-value",86),a(),t(27,"div",87),_(28,"p-divider"),a(),t(29,"div",14)(30,"div",15)(31,"div",24),_(32,"app-calc-value",88),a(),t(33,"div",24),_(34,"app-calc-value",89),a(),t(35,"div",24),_(36,"app-calc-value",90),a(),t(37,"div",24),_(38,"app-calc-value",91),a(),t(39,"div",24),_(40,"app-calc-value",92),a(),t(41,"div",24),_(42,"app-calc-value",93),a()()(),t(43,"div",87),_(44,"p-divider"),a(),t(45,"div",94),_(46,"app-calc-value",95),a(),t(47,"div",94),_(48,"app-calc-value",96),a(),t(49,"div",14),_(50,"app-calc-value",97),a(),u(51,ni,2,5,"div",67),t(52,"div",98),_(53,"app-calc-value",99),a()()()),l&2){let e=s.$implicit,m=c();i(2),p("ngIf",m.isCalculating),i(3),h(e.name),i(1),p("ngIf",m.isCalculated[e.id]),i(4),h(e.summary==null||e.summary.calcSkill==null?null:e.summary.calcSkill.dmgType),i(3),L("","property_"+(e.summary==null||e.summary.calcSkill==null?null:e.summary.calcSkill.propertySkill)," px-1 font-semibold"),i(1),h(e.summary==null||e.summary.calcSkill==null?null:e.summary.calcSkill.propertySkill),i(2),v("( x ",e.summary==null||e.summary.dmg==null?null:e.summary.dmg.skillPropertyMultiplier,")"),i(2),p("enableCompare",!1)("max",e.summary==null||e.summary.calcSkill==null?null:e.summary.calcSkill.baseSkillDamage),i(2),p("enableCompare",!1)("max",e.summary==null||e.summary.dmg==null?null:e.summary.dmg.skillSizePenalty),i(2),p("enableCompare",!1)("max",e.summary==null||e.summary.dmg==null?null:e.summary.dmg.skillTotalPene),i(2),p("enableCompare",!1)("max",e.summary==null||e.summary.dmg==null?null:e.summary.dmg.skillAccuracy),i(2),p("enableCompare",!1)("max",e.summary==null||e.summary.calc==null?null:e.summary.calc.hitPerSecs),i(6),p("enableCompare",!1)("isGreaterIsBetter",!1)("max",e.summary==null||e.summary.calcSkill==null?null:e.summary.calcSkill.reducedVct),i(2),p("enableCompare",!1)("isGreaterIsBetter",!1)("max",e.summary==null||e.summary.calcSkill==null?null:e.summary.calcSkill.reducedFct),i(2),p("enableCompare",!1)("isGreaterIsBetter",!1)("max",e.summary==null||e.summary.calcSkill==null?null:e.summary.calcSkill.reducedCd),i(2),p("enableCompare",!1)("isGreaterIsBetter",!1)("max",e.summary==null||e.summary.calcSkill==null?null:e.summary.calcSkill.reducedAcd),i(2),p("enableCompare",!1)("isGreaterIsBetter",!1)("max",e.summary==null||e.summary.calcSkill==null?null:e.summary.calcSkill.castPeriod),i(2),p("enableCompare",!1)("max",e.summary==null||e.summary.calcSkill==null?null:e.summary.calcSkill.totalHitPerSec),i(3),p("hidden",!(!(e.summary==null||e.summary.dmg==null)&&e.summary.dmg.skillCanCri)),i(1),p("enableCompare",!1)("max",e.summary==null||e.summary.dmg==null?null:e.summary.dmg.skillCriRateToMonster),i(1),p("hidden",!(!(e.summary==null||e.summary.dmg==null)&&e.summary.dmg.skillCanCri)),i(1),p("enableCompare",!1)("max",e.summary==null||e.summary.dmg==null?null:e.summary.dmg.skillCriDmgToMonster),i(2),p("enableCompare",!1)("label",!(e.summary==null||e.summary.dmg==null)&&e.summary.dmg.skillCanCri?"SkillDmgCri:":"SkillDmg:")("showPercentDiff",!0)("totalHit",e.summary==null||e.summary.calcSkill==null?null:e.summary.calcSkill.totalHits)("min",e.summary==null||e.summary.dmg==null?null:e.summary.dmg.skillMinDamage)("max",e.summary==null||e.summary.dmg==null?null:e.summary.dmg.skillMaxDamage),i(1),p("ngIf",(e.summary==null||e.summary.dmg==null?null:e.summary.dmg.skillPart2Label)&&(e.summary==null||e.summary.dmg==null?null:e.summary.dmg.skillMaxDamage2)),i(1),p("hidden",e.summary==null||e.summary.dmg==null?null:e.summary.dmg.isAutoSpell),i(1),p("enableCompare",!1)("showPercentDiff",!0)("max",e.summary==null||e.summary.dmg==null?null:e.summary.dmg.skillDps)}}var ai=function(){return{width:"25vw"}},oi=function(){return{"min-width":"65rem"}},mi=function(){return[0]},ri=function(){return["levelList"]},ot=Ze(),mt=(()=>{let s=class s{constructor(m,o,n,g){this.presetService=m,this.roService=o,this.messageService=n,this.confirmationService=g,this.availableTags=de.map(f=>G({},f)),this.tagLabelMap=de.reduce((f,C)=>(f[C.value]=C,f),{}),this.isLoading=!1,this.items=[],this.totalRecord=0,this.firstRecord=0,this.pageOptions=[5,10,20],this.pageLimit=this.pageOptions[0],this.allClasses=ot,this.selectedTag="no_tag",this.selectedClassId=this.allClasses[0].value,this.searchSource=new le,this.searchEvent$=this.searchSource.asObservable(),this.likeSource=new le,this.likeEvent$=this.likeSource.asObservable(),this.subscriptions=[],this.viewDetail={},this.monsterCalculator=new pe,this.groupMonsterList=[],this.selectedMonster=21067,this.selectedAtkSkill="",this.isCalculating=!1,this.offensiveSkills=[],this.atkSkillCascades=[],this.skillBuffs=Y,this.atkSkills=[],this.activeSkills=[],this.totalSummary={},this.summaries=[],this.isCalculated={}}ngOnInit(){this.subscribeSearch(),this.subscribeLike(),this.initData().subscribe(()=>{})}ngOnDestroy(){for(let m of this.subscriptions)m?.unsubscribe()}initData(){return ge([this.roService.getItems(),this.roService.getMonsters(),this.roService.getHpSpTable()]).pipe(D(([m,o,n])=>{this.itemMap=m,this.monsterDataMap=o,this.hpSpTable=n,this.onSelectClassChange(),this.setMonsterDropdownList(),this.onMonsterChange()}))}setMonsterDropdownList(){let m=new Map,o=[],n=Object.values(this.monsterDataMap).sort((f,C)=>f.stats.level>C.stats.level?1:-1),g={0:"Normal",1:"Boss"};for(let f of n){let{id:C,name:y,spawn:I,stats:Z}=f,{level:V,health:ee,mvp:F,class:H,elementShortName:te,raceName:U,scaleName:B}=Z,S=F===1?" Boss":Ye(I)||(H===1?" Boss":"Etc"),z=m.get(S),q={label:`${V} ${y} (${U} ${B.at(0)})`,name:y,value:C,level:V,elementName:te,raceName:U,className:g[H],mvp:F,scaleName:B.at(0),health:ee,groups:S.trim().split(","),searchVal:S};o.push(q),z?z.items.push(q):m.set(S,{label:S,items:[q]})}this.groupMonsterList=[...m.values()].sort((f,C)=>f.label>C.label?1:-1)}subscribeSearch(){let m=this.searchEvent$.pipe(D(()=>this.isLoading=!0),D(o=>{this.viewDetail={},o&&(this.isCalculated={})}),w(()=>{let o=ae({items:[],totalItem:0});return this.selectedClassId?this.presetService.getPublishPresets({classId:this.selectedClassId,skip:this.firstRecord,take:this.pageLimit,tagName:this.selectedTag}).pipe(W(n=>(n instanceof Me&&this.messageService.add({severity:"error",summary:"Please login"}),o))):o})).subscribe(o=>{this.items=o.items.map(n=>{let f={2:100232,3:100233}[n.model?.skillBuffMap["Special Pharmacy"]];f&&Array.isArray(n.model.consumables)&&(n.model.consumables.includes(f)||n.model.consumables.push(f));let y=this.prepare(n.model).getTotalSummary();return ne(G({},n),{str:(n.model.jobStr||0)+(y.str||0),agi:(n.model.jobAgi||0)+(y.agi||0),vit:(n.model.jobVit||0)+(y.vit||0),int:(n.model.jobInt||0)+(y.int||0),dex:(n.model.jobDex||0)+(y.dex||0),luk:(n.model.jobLuk||0)+(y.luk||0),summary:y})}),this.totalRecord=o.totalItem,this.isLoading=!1});this.subscriptions.push(m)}search(m){this.searchSource.next(m)}onSelectClassChange(){this.firstRecord=0,this.searchSource.next(!0),this.selectedClassId&&(this.selectedCharacter=ot.find(m=>m.value===this.selectedClassId)?.instant,this.setClassSkill(),E().subscribe(()=>{this.setDefaultSkill()})),this.summaries=[]}subscribeLike(){let m=this.likeEvent$.pipe(D(()=>this.isLoading=!0),he(300),w(({tagId:o,isLike:n})=>n?this.presetService.likePresetTags(o):this.presetService.unlikePresetTag(o)),W(o=>(this.isLoading=!1,_e(()=>o)))).subscribe(o=>{let n=this.items.find(g=>g.tagId===o.id);n&&(n.liked=o.liked,n.tags[this.selectedTag]=o.totalLike),this.isLoading=!1});this.subscriptions.push(m)}likePreset(m,o){this.likeSource.next({tagId:m,isLike:o})}waitConfirm(m,o){return new Promise(n=>{this.confirmationService.confirm({message:m,header:"Confirmation",icon:o||"pi pi-exclamation-triangle",accept:()=>{n(!0)},reject:()=>{console.log("reject confirm"),n(!1)}})})}copyPreset(m){console.log(m.publishName),this.waitConfirm(`Copy "${m.publishName}" ?`).then(o=>{o&&(this.isLoading=!1,this.presetService.createPreset({label:`copied ${m.publishName}`,model:m.model}).pipe(D(()=>{this.messageService.add({severity:"success",summary:"Copy preset success"})}),W(n=>(this.messageService.add({severity:"error",summary:n?.error||n?.message}),ae(!0)))).subscribe(()=>{this.isLoading=!1}))})}pageChange(m){this.firstRecord=m.first,this.pageLimit=m.rows,this.search(!1)}addToCalc(m){this.isCalculating=!0,E().pipe(w(()=>(this.isCalculated[m.tagId]=!0,E())),w(()=>{let n=this.prepare(m.model).getTotalSummary(),g=this.summaries.find(f=>f.id===m.tagId);return g?g.summary=n:this.summaries.push({id:m.tagId,name:m.publishName,model:m.model,summary:n}),E()})).subscribe(()=>{this.isCalculating=!1})}removeCalculated(m){this.isCalculated[m]=!1,this.isCalculating=!0,E().pipe(w(()=>(this.summaries=this.summaries.filter(o=>o.id!==m),E()))).subscribe(()=>{this.isCalculating=!1})}setClassSkill(){this.activeSkills=this.selectedCharacter.activeSkills,this.atkSkills=this.selectedCharacter.atkSkills,this.atkSkillCascades=this.selectedCharacter.atkSkills,this.offensiveSkills=[...new Set(this.atkSkills.map(m=>m.name)).values()].map(m=>({label:m,value:m}))}setDefaultSkill(){let m=this.atkSkills[0].value;this.selectedAtkSkill=m}getOptionScripts(m){return(m||[]).map(o=>{if(typeof o!="string"||o==="")return"";let[,n,g]=o.match(/(.+):(\d+)/)??[];return n?{[n]:Number(g)}:""}).filter(Boolean)}prepare(m){let{activeSkills:o,passiveSkills:n}=m,{equipAtks:g,masteryAtks:f,activeSkillNames:C,learnedSkillMap:y}=this.selectedCharacter.setLearnSkills({activeSkillIds:o,passiveSkillIds:n}).getSkillBonusAndName(),{consumables:I,consumables2:Z,aspdPotion:V,aspdPotions:ee}=m,F=I.includes(12792),H=I.includes(12424),te=[...I,...Z,...ee].filter(Boolean).filter(S=>!F||F&&S!==12791).map(S=>this.itemMap[S].script),U={},B={};return this.skillBuffs.forEach((S,z)=>{let q=(m.skillBuffs||[])[z],ie=S.dropdown.find(st=>st.value===q);ie?.isUse&&!C.has(S.name)&&(S.isMasteryAtk?B[S.name]=ie.bonus:U[S.name]=ie.bonus)}),m.rawOptionTxts=Qe(m,this.itemMap),new pe().setMasterItems(this.itemMap).setClass(this.selectedCharacter).setHpSpTable(this.hpSpTable).loadItemFromModel(m).setMonster(this.monsterDataMap[this.selectedMonster]).setEquipAtkSkillAtk(g).setBuffBonus({masteryAtk:B,equipAtk:U}).setMasterySkillAtk(f).setConsumables(te).setAspdPotion(V).setExtraOptions(this.getOptionScripts(m.rawOptionTxts)).setUsedSkillNames(C).setLearnedSkills(y).setOffensiveSkill(this.selectedAtkSkill).prepareAllItemBonus().calcAllDefs().calculateHpSp({isUseHpL:H}).calculateAllDamages(this.selectedAtkSkill)}onAtkSkillChange(){this.recalcSummary()}onMonsterChange(){this.totalSummary=this.monsterCalculator.setMonster(this.monsterDataMap[this.selectedMonster]).getTotalSummary(),this.recalcSummary()}recalcSummary(){this.isCalculating=!0,E().pipe(w(()=>(this.summaries=this.summaries.map(m=>{let o=this.prepare(m.model);return ne(G({},m),{summary:o.getTotalSummary()})}),E()))).subscribe(()=>this.isCalculating=!1)}};s.\u0275fac=function(o){return new(o||s)(A(Ie),A(et),A(Q),A(X))},s.\u0275cmp=P({type:s,selectors:[["app-shared-preset"]],features:[ve([Q,X])],decls:94,vars:55,consts:[[3,"position"],[1,"grid","grid-nogutter",2,"min-width","1500px"],[1,"col-12","mb-2"],[1,"grid","grid-nogutter","column_list"],[3,"options","ngModel","disabled","ngModelChange","onChange"],["pTemplate","item","class","py-0"],[1,"col-9"],["styleClass","p-datatable-striped","filterValue","label",3,"value","loading","tableStyle","showCurrentPageReport","paginator","first","rows","totalRecords","lazy","rowsPerPageOptions","onPage"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"p-fluid","col-3"],[3,"multiple","activeIndex"],["header","Battle Summary"],[1,"grid","grid-nogutter","battle_summary"],[1,"col-12"],[1,"grid","grid-nogutter"],[1,"p-inputgroup"],[1,"p-inputgroup-addon","monster_hilight_label"],["inputId","monsterOpponent","filterBy","label,searchVal","scrollHeight","300px",3,"autoDisplayFirst","resetFilterOnHide","options","filter","group","ngModel","ngModelChange","onChange"],["pTemplate","group"],[1,"col-6","flex","align-items-center","justify-content-center"],[1,"grid","grid-nogutter",2,"height","100%","width","100%"],[1,"col-12","flex","align-items-center","justify-content-center"],["alt","-",1,"img_monster",3,"src"],[1,"col-6"],[1,"summary_monster_value","px-1","font-semibold"],[1,"summary_monster_value","px-1","font-bold",2,"color","var(--red-500)"],["class","font-bold px-1",4,"ngIf"],[1,"summary_monster_value","px-1","font-semibold",2,"color","var(--yellow-300)"],[1,"summary_monster_value","px-1","font-semibold",2,"color","var(--cyan-300)"],[1,"col-12","flex","justify-content-around"],[1,"summary_monster_value","px-1","font-semibold",2,"color","var(--red-300)"],[1,"summary_monster_value","px-1","font-semibold",2,"color","var(--blue-300)"],[1,"summary_monster_value","px-1","font-semibold",2,"color","var(--green-300)"],[1,"grid","grid-nogutter",2,"position","relative"],[1,"col-12","skill-selection"],[1,"p-inputgroup-addon","skill_hilight_label"],["inputId","skill","optionValue","value","optionLabel","label","optionGroupLabel","label","placeholder","-",3,"ngModel","options","optionGroupChildren","ngModelChange","onChange"],["class","col-12 my-2",4,"ngFor","ngForOf"],[1,"flex","gap-2","py-0"],["alt","",1,"job_img",3,"src"],[1,"text_ellips"],[1,"col-12","flex","justify-content-between"],[1,"flex","align-items-center"],[1,"like_section","pr-3"],["pButton","","icon","pi pi-thumbs-up text-3xl","class","p-button-text p-button-rounded",3,"click",4,"ngIf"],["pButton","","icon","pi pi-thumbs-up-fill text-3xl","class","p-button-text p-button-rounded",3,"click",4,"ngIf"],[1,"px-2","font-bold","text-primary","text-xl"],[1,"font-bold","text-2xl"],[1,"font-medium"],["pButton","","icon","pi pi-copy text-3xl","label","Copy",1,"p-button-text","p-button-rounded","p-button-warning",3,"click"],[1,"flex","ml-3"],[3,"inputId","ngModel","ngModelChange"],[1,"mx-2",3,"for"],["pButton","","type","button","label","Calculate",1,"p-button-info",3,"disabled","loading","click"],[1,"col-10",2,"min-width","450px","overflow","hidden"],[3,"itemMap","model"],[1,"col-2"],[1,"summary_highlight","text-xl","font-semibold"],[1,"summary_stat_atk","text-xl"],[1,"summary_stat_matk","text-xl"],[1,"summary_stat_atk","text-xl",2,"color","var(--green-300)"],[1,"summary_stat_def","text-xl"],[1,"grid","grid-nogutter","mt-2"],[1,"font-semibold","px-1","summary_stat_atk"],[1,"font-semibold","px-1","summary_highlight"],[1,"font-semibold","px-1","summary_stat_matk"],["class","col-12",4,"ngIf"],["pButton","","icon","pi pi-thumbs-up text-3xl",1,"p-button-text","p-button-rounded",3,"click"],["pButton","","icon","pi pi-thumbs-up-fill text-3xl",1,"p-button-text","p-button-rounded",3,"click"],[1,"col-5"],[1,"col-7"],[3,"itemMap","model","job"],[1,"flex","align-items-center","font-bold","dropdown_monster_group_label"],[1,"font-bold","px-1"],[1,"col-12","my-2"],["class","loading_block",4,"ngIf"],[1,"col-12","flex","align-items-center","justify-content-between"],[1,"font-bold","text-xl"],[4,"ngIf"],[1,"summary_highlight","bg_surface","font-semibold"],[1,"summary_highlight","bg_surface","px-2"],["label","BaseSkill:","unit","%","styleClass","summary_highlight","styleClass2","summary_compare",3,"enableCompare","max"],["label","SizePenalty:","unit"," %","styleClass","summary_highlight","styleClass2","summary_compare",3,"enableCompare","max"],["label","\u0E40\u0E08\u0E32\u0E30:","unit","%","styleClass","summary_highlight","styleClass2","summary_compare",3,"enableCompare","max"],["label","\u0E41\u0E21\u0E48\u0E19:","unit","%","styleClass","summary_highlight","styleClass2","summary_compare",3,"enableCompare","max"],["label","ASPD:","unit"," Hits/s","styleClass","summary_highlight","styleClass2","summary_compare",3,"enableCompare","max"],[1,"col-12","py-1","divider"],["label","VCT:","styleClass","summary_value","styleClass2","summary_compare",3,"enableCompare","isGreaterIsBetter","max"],["label","FCT:","styleClass","summary_value","styleClass2","summary_compare",3,"enableCompare","isGreaterIsBetter","max"],["label","CD:","styleClass","summary_value","styleClass2","summary_compare",3,"enableCompare","isGreaterIsBetter","max"],["label","Delay:","styleClass","summary_value","styleClass2","summary_compare",3,"enableCompare","isGreaterIsBetter","max"],["label","Cast:","styleClass","summary_damage","styleClass2","summary_compare",3,"enableCompare","isGreaterIsBetter","max"],["label","Skill/s:","unit"," Hits/s","styleClass","summary_highlight","styleClass2","summary_compare",3,"enableCompare","max"],[1,"col-6",3,"hidden"],["label","CriRate:","unit","%","styleClass","summary_damage","styleClass2","summary_compare",3,"enableCompare","max"],["label","CriDmg:","unit","%","styleClass","summary_damage","styleClass2","summary_compare",3,"enableCompare","max"],["styleClass","summary_damage","styleClass2","summary_compare",3,"enableCompare","label","showPercentDiff","totalHit","min","max"],[1,"col-12",3,"hidden"],["label","DPS:","styleClass","summary_highlight","styleClass2","summary_compare",3,"enableCompare","showPercentDiff","max"],[1,"loading_block"],[1,"pi","pi-spin","pi-spinner",2,"font-size","2rem"],["pButton","","type","button",1,"p-button-text","p-button-rounded","p-button-danger",3,"disabled","click"],[1,"pi","pi-times","text-xl"],["styleClass","summary_damage","styleClass2","summary_compare",3,"enableCompare","label","totalHit","min","max"]],template:function(o,n){o&1&&(_(0,"p-toast")(1,"p-confirmDialog",0),t(2,"div",1)(3,"div",2)(4,"div",3)(5,"p-listbox",4),M("ngModelChange",function(f){return n.selectedClassId=f})("onChange",function(){return n.onSelectClassChange()}),u(6,Wt,4,2,"ng-template",5),a()()(),t(7,"div",6)(8,"p-table",7),M("onPage",function(f){return n.pageChange(f)}),u(9,Qt,120,38,"ng-template",8),u(10,Yt,3,0,"ng-template",9),a()(),t(11,"div",10)(12,"p-accordion",11)(13,"p-accordionTab",12)(14,"div",13)(15,"div",14)(16,"div",15)(17,"div",14)(18,"div",16)(19,"span",17),r(20,"Monster"),a(),t(21,"p-dropdown",18),M("ngModelChange",function(f){return n.selectedMonster=f})("onChange",function(){return n.onMonsterChange()}),u(22,Zt,3,1,"ng-template",19),a()()(),t(23,"div",20)(24,"div",21)(25,"div",22),_(26,"img",23),a()()(),t(27,"div",24)(28,"div",15)(29,"div",14),r(30," HP "),t(31,"span",25),r(32),Ce(33,"number"),a()(),t(34,"div",14),r(35," Def "),t(36,"span",25),r(37),a()(),t(38,"div",14),r(39," Mdef "),t(40,"span",25),r(41),a()(),t(42,"div",14),r(43," Req.Hit100 "),t(44,"span",25),r(45),a()(),t(46,"div",14)(47,"span",26),r(48),a(),u(49,ei,2,0,"span",27),a(),t(50,"div",14)(51,"span"),r(52),a()(),t(53,"div",14)(54,"span",28),r(55),a()(),t(56,"div",14)(57,"span",29),r(58),a()(),t(59,"div",30)(60,"div"),r(61," STR "),t(62,"span",31),r(63),a()(),t(64,"div"),r(65," INT "),t(66,"span",32),r(67),a()()(),t(68,"div",30)(69,"div"),r(70," DEX "),t(71,"span",33),r(72),a()(),t(73,"div"),r(74," AGI "),t(75,"span",33),r(76),a()()(),t(77,"div",30)(78,"div"),r(79," VIT "),t(80,"span",28),r(81),a()(),t(82,"div"),r(83," LUK "),t(84,"span",28),r(85),a()()()()()()(),t(86,"div",14)(87,"div",34)(88,"div",35)(89,"div",16)(90,"span",36),r(91,"Skill"),a(),t(92,"p-cascadeSelect",37),M("ngModelChange",function(f){return n.selectedAtkSkill=f})("onChange",function(){return n.onAtkSkillChange()}),a()()()()(),u(93,li,54,53,"div",38),a()()()()()),o&2&&(i(1),fe(j(51,ai)),p("position","top"),i(4),p("options",n.allClasses)("ngModel",n.selectedClassId)("disabled",n.isLoading),i(3),p("value",n.items)("loading",n.isLoading)("tableStyle",j(52,oi))("showCurrentPageReport",!0)("paginator",!0)("first",n.firstRecord)("rows",n.pageLimit)("totalRecords",n.totalRecord)("lazy",!0)("rowsPerPageOptions",n.pageOptions),i(4),p("multiple",!0)("activeIndex",j(53,mi)),i(9),p("autoDisplayFirst",!1)("resetFilterOnHide",!0)("options",n.groupMonsterList)("filter",!0)("group",!0)("ngModel",n.selectedMonster),i(5),b("src","https://static.divine-pride.net/images/mobs/png/",n.selectedMonster,".png",x),i(6),h(ye(33,49,n.totalSummary==null||n.totalSummary.monster==null?null:n.totalSummary.monster.hp)),i(5),me("",n.totalSummary==null||n.totalSummary.monster==null?null:n.totalSummary.monster.softDef," + ",n.totalSummary==null||n.totalSummary.monster==null?null:n.totalSummary.monster.def,""),i(4),me("",n.totalSummary==null||n.totalSummary.monster==null?null:n.totalSummary.monster.softMDef," + ",n.totalSummary==null||n.totalSummary.monster==null?null:n.totalSummary.monster.mdef,""),i(4),h(n.totalSummary==null||n.totalSummary.monster==null?null:n.totalSummary.monster.hitRequireFor100),i(3),h(n.totalSummary==null||n.totalSummary.monster==null?null:n.totalSummary.monster.typeUpper),i(1),p("ngIf",n.totalSummary==null||n.totalSummary.monster==null?null:n.totalSummary.monster.isMvp),i(2),L("","property_"+(n.totalSummary==null||n.totalSummary.monster==null?null:n.totalSummary.monster.elementUpper)," summary_monster_value px-1 font-semibold"),i(1),h(n.totalSummary==null||n.totalSummary.monster==null?null:n.totalSummary.monster.elementLevelUpper),i(3),h(n.totalSummary==null||n.totalSummary.monster==null?null:n.totalSummary.monster.raceUpper),i(3),h(n.totalSummary==null||n.totalSummary.monster==null?null:n.totalSummary.monster.sizeFullUpper),i(5),v(" ",n.totalSummary==null||n.totalSummary.monster==null?null:n.totalSummary.monster.str," "),i(4),v(" ",n.totalSummary==null||n.totalSummary.monster==null?null:n.totalSummary.monster.int," "),i(5),v(" ",n.totalSummary==null||n.totalSummary.monster==null?null:n.totalSummary.monster.dex," "),i(4),v(" ",n.totalSummary==null||n.totalSummary.monster==null?null:n.totalSummary.monster.agi," "),i(5),v(" ",n.totalSummary==null||n.totalSummary.monster==null?null:n.totalSummary.monster.vit," "),i(4),v(" ",n.totalSummary==null||n.totalSummary.monster==null?null:n.totalSummary.monster.luk," "),i(7),p("ngModel",n.selectedAtkSkill)("options",n.atkSkillCascades)("optionGroupChildren",j(54,ri)),i(1),p("ngForOf",n.summaries))},dependencies:[Je,Se,Ee,k,$,Re,De,Le,We,qe,Fe,Oe,Ve,Ne,ke,ze,tt,nt,lt,at,xe],styles:["[_nghost-%COMP%]     .column_list p-listbox .p-listbox-list{min-width:1480px;columns:10;padding:0}[_nghost-%COMP%]     .column_list .p-listbox-item{padding:.5rem}[_nghost-%COMP%]     .battle_summary .p-fieldset-content{padding-top:0;padding-bottom:0}.p-inputgroup[_ngcontent-%COMP%]   p-dropdown[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]     .p-inputgroup p-dropdown .p-dropdown-filter{width:100%}[_nghost-%COMP%]     .divider .p-divider-horizontal{margin:0;padding:0}.summary_monster_value[_ngcontent-%COMP%]{background-color:#121212;color:var(--red-300)}.monster_hilight_label[_ngcontent-%COMP%]{background-color:#121212;color:var(--red-500);width:75px}.skill_hilight_label[_ngcontent-%COMP%]{background-color:#121212;color:var(--yellow-500);width:60px}.dropdown_monster_group_label[_ngcontent-%COMP%]{background-color:var(--green-900);color:#fff}.img_monster[_ngcontent-%COMP%]{background-color:#fff;height:150px}.border_default[_ngcontent-%COMP%]{border:var(--border-radius) solid var(--surface-border)}.job_img[_ngcontent-%COMP%]{height:fit-content}.like_section[_ngcontent-%COMP%]{display:flex;align-items:center}.loading_block[_ngcontent-%COMP%]{position:absolute;background-color:#0006;transition-duration:.2s;z-index:2;display:flex;align-items:center;justify-content:center;width:100%;height:100%}.summary_stat_atk[_ngcontent-%COMP%]{color:var(--orange-300)}.summary_stat_matk[_ngcontent-%COMP%]{color:var(--blue-300)}.summary_stat_def[_ngcontent-%COMP%]{color:var(--purple-200)}.summary_highlight[_ngcontent-%COMP%]{color:var(--orange-400)}.summary_value[_ngcontent-%COMP%]{background-color:#121212;color:var(--blue-300)}.summary_damage[_ngcontent-%COMP%]{background-color:#121212;color:var(--teal-300)}.bg_surface[_ngcontent-%COMP%]{background-color:#121212}[_nghost-%COMP%]     .skill-selection .p-cascadeselect-sublist{left:-70%!important;min-width:70%}[_nghost-%COMP%]     .skill-selection .p-inputgroup .p-cascadeselect{width:100%}"]});let l=s;return l})();var rt=(()=>{let s=class s{};s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=J({type:s}),s.\u0275inj=K({imports:[re.forChild([{path:"",component:mt}]),re]});let l=s;return l})();var un=(()=>{let s=class s{};s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=J({type:s}),s.\u0275inj=K({imports:[Xe,Pe,be,je,Be,$e,Ke,Ae,Ue,Te,He,rt,we,Ge,it]});let l=s;return l})();export{un as SharedPresetModule};
